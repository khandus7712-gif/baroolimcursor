# Google 로그인 "잘되다가 안 되는" 경우 빠른 해결

## 🔴 증상
- 이전에는 Google 로그인이 정상 작동했음
- 갑자기 `invalid_client` 오류 발생
- 클라이언트 ID는 Google Cloud Console에 존재함

## ✅ 빠른 해결 방법 (순서대로 시도)

### 1단계: 서버 완전히 재시작 ⭐ (가장 중요!)

```bash
# 1. 서버 중지 (Ctrl+C)
# 2. 서버 재시작
npm run dev
```

**확인 사항**: 서버 콘솔에 다음 메시지가 보여야 합니다:
```
✅ Google OAuth 환경 변수 로드됨: { clientId: '8549...com', hasSecret: true }
```

이 메시지가 보이지 않으면 환경 변수가 로드되지 않은 것입니다.

### 2단계: Next.js 캐시 삭제

```bash
# 서버 중지 후
Remove-Item -Recurse -Force .next
# 또는
rm -rf .next

# 서버 재시작
npm run dev
```

### 3단계: 브라우저 캐시 클리어

1. **시크릿 모드**에서 테스트 (가장 빠름)
   - Chrome: Ctrl+Shift+N
   - Edge: Ctrl+Shift+P

2. 또는 개발자 도구에서:
   - F12 → Network 탭
   - "Disable cache" 체크
   - 페이지 새로고침

### 4단계: 환경 변수 재확인

```bash
npm run check:env
```

모든 항목이 ✅로 표시되어야 합니다.

### 5단계: 서버 콘솔 확인

서버를 시작할 때 다음을 확인:

1. **환경 변수 로드 메시지**:
   ```
   ✅ Google OAuth 환경 변수 로드됨: ...
   ```

2. **경고 메시지가 없는지 확인**:
   ```
   ⚠️  Google OAuth가 설정되지 않았습니다.
   ```
   이 메시지가 보이면 환경 변수가 로드되지 않은 것입니다.

## 🔍 원인별 해결

### 원인 1: 서버 미재시작
**증상**: 환경 변수를 변경했지만 서버를 재시작하지 않음

**해결**: 
```bash
# 서버 중지 (Ctrl+C)
npm run dev
```

### 원인 2: Next.js 캐시
**증상**: 코드는 변경했지만 캐시된 설정이 사용됨

**해결**:
```bash
Remove-Item -Recurse -Force .next
npm run dev
```

### 원인 3: 환경 변수 로드 실패
**증상**: 서버 콘솔에 환경 변수 로드 메시지가 없음

**해결**:
1. `.env` 파일이 프로젝트 루트에 있는지 확인
2. 환경 변수에 따옴표가 올바르게 있는지 확인
3. 서버 재시작

### 원인 4: 브라우저 캐시
**증상**: 브라우저가 이전 설정을 캐시함

**해결**: 시크릿 모드에서 테스트

## 📋 체크리스트

- [ ] 서버를 완전히 재시작했나요? (Ctrl+C 후 npm run dev)
- [ ] 서버 콘솔에 "✅ Google OAuth 환경 변수 로드됨" 메시지가 보이나요?
- [ ] `.next` 폴더를 삭제하고 재시작했나요?
- [ ] 시크릿 모드에서 테스트했나요?
- [ ] `npm run check:env` 결과가 모두 ✅인가요?

## 💡 팁

**가장 흔한 원인**: 서버를 재시작하지 않아서 환경 변수가 로드되지 않음

**확인 방법**: 서버 콘솔에 환경 변수 로드 메시지가 있는지 확인

**빠른 해결**: 
1. 서버 재시작
2. 시크릿 모드에서 테스트

## 🚨 여전히 안 되면

1. Google Cloud Console에서 클라이언트 ID 재확인
2. `.env` 파일의 클라이언트 ID와 Google Cloud Console의 ID가 정확히 일치하는지 확인
3. OAuth 동의 화면이 완료되었는지 확인


