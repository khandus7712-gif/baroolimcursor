# 토스페이먼츠 테스트 모드 가이드

## 결제경로 파일(PPT) 제작을 위한 테스트 결제 방법

토스페이먼츠 테스트 모드를 사용하면 **실제 결제 없이** 결제창을 열고 결제 완료까지 모든 과정을 테스트할 수 있습니다.

---

## 1. 테스트 모드 설정

### 환경 변수 설정

`.env.local` 파일에 테스트 키를 추가하세요:

```env
# 토스페이먼츠 테스트 모드
NEXT_PUBLIC_TOSS_CLIENT_KEY=test_ck_XXXXXXXXXX
TOSS_SECRET_KEY=test_sk_XXXXXXXXXX
```

**테스트 키 발급 방법:**
1. [토스페이먼츠 개발자센터](https://developers.tosspayments.com/) 접속
2. 로그인 후 "내 상점" → "개발용 API 키" 확인
3. 테스트 클라이언트 키와 시크릿 키 복사

---

## 2. 테스트 결제 진행

### 테스트 카드 번호

토스페이먼츠 테스트 모드에서는 다음 테스트 카드 번호를 사용할 수 있습니다:

**성공 테스트 카드:**
- 카드번호: `4111 1111 1111 1111`
- 유효기간: `12/34` (미래 날짜)
- CVC: `123`
- 비밀번호: `123456` (간편결제)

**실패 테스트 카드:**
- 카드번호: `4000 0000 0000 0002` (결제 실패)

---

## 3. 결제경로 스크린샷 찍기

### 단계별 스크린샷 가이드

#### 1단계: 메인 페이지
- URL: https://baroolim.com
- 스크린샷: 메인 페이지 전체
- 설명: "바로올림 메인 페이지 접속"

#### 2단계: 요금제 페이지
- URL: https://baroolim.com/pricing
- 스크린샷: 요금제 선택 페이지
- 설명: "요금제 선택 페이지에서 원하는 플랜 선택"

#### 3단계: 결제 페이지
- URL: https://baroolim.com/payment?plan=BASIC (예시)
- 스크린샷: 결제 페이지 (플랜 선택 후)
- 설명: "결제 페이지로 이동하여 결제 정보 확인"

#### 4단계: 토스페이먼츠 결제창
- 스크린샷: 토스페이먼츠 결제창 화면
- 설명: "토스페이먼츠 결제창에서 결제 수단 선택 및 결제 진행"
- **테스트 카드 번호 입력**: `4111 1111 1111 1111`

#### 5단계: 결제 완료 페이지
- URL: https://baroolim.com/payment/success
- 스크린샷: 결제 완료 확인 페이지
- 설명: "결제 완료 확인 페이지"

#### 6단계: 서비스 이용 페이지
- URL: https://baroolim.com/studio
- 스크린샷: 콘텐츠 생성 페이지
- 설명: "결제 후 서비스 이용 가능"

---

## 4. 테스트 모드 활성화 방법

### 방법 1: 환경 변수로 테스트 모드 활성화

현재 코드는 환경 변수에 따라 자동으로 테스트/실제 모드를 구분합니다:

- `test_ck_`로 시작 → 테스트 모드
- `live_ck_`로 시작 → 실제 결제 모드

### 방법 2: 개발 환경에서 테스트

로컬 개발 환경에서 테스트:

```bash
# .env.local 파일에 테스트 키 추가
NEXT_PUBLIC_TOSS_CLIENT_KEY=test_ck_XXXXXXXXXX
TOSS_SECRET_KEY=test_sk_XXXXXXXXXX

# 개발 서버 실행
npm run dev
```

브라우저에서 `http://localhost:3000/payment` 접속하여 테스트 결제 진행

---

## 5. 주의사항

1. **테스트 모드는 실제 결제가 발생하지 않습니다**
   - 테스트 결제는 DB에 기록되지만 실제 결제는 되지 않음
   - 테스트 결제 내역은 관리자 대시보드에서 확인 가능

2. **프로덕션 환경에서는 반드시 실제 키 사용**
   - 배포 환경에서는 `live_ck_`로 시작하는 실제 키 사용
   - 테스트 키는 개발/테스트 환경에서만 사용

3. **스크린샷 시 개인정보 주의**
   - 결제창 스크린샷 시 카드 번호, 이름 등 개인정보는 모자이크 처리
   - 또는 테스트 데이터만 사용

---

## 6. PPT 제작 팁

1. **각 슬라이드에 단계 번호와 설명 추가**
   - 예: "1단계: 메인 페이지 접속"
   - 예: "2단계: 요금제 선택"

2. **화살표나 번호로 흐름 표시**
   - 각 단계 간 연결 관계를 명확히 표시

3. **중요한 부분 강조**
   - 결제 금액, 플랜 이름 등 중요 정보는 박스나 강조 표시

4. **파일명 규칙**
   - `바로올림_결제경로파일_20250109.pptx`

---

## 7. 빠른 테스트 방법

### 로컬에서 빠르게 테스트하기

1. `.env.local`에 테스트 키 추가
2. `npm run dev` 실행
3. `http://localhost:3000/payment?plan=BASIC` 접속
4. 플랜 선택 → 결제하기 클릭
5. 테스트 카드 번호 입력 (`4111 1111 1111 1111`)
6. 결제 완료까지 진행
7. 각 단계 스크린샷

---

## 8. 문제 해결

### 결제창이 안 열리는 경우
- `NEXT_PUBLIC_TOSS_CLIENT_KEY`가 올바르게 설정되었는지 확인
- 브라우저 콘솔에서 에러 메시지 확인

### 결제가 실패하는 경우
- 테스트 카드 번호가 올바른지 확인 (`4111 1111 1111 1111`)
- 유효기간을 미래 날짜로 설정

### 결제 완료 페이지가 안 나오는 경우
- `successUrl`이 올바르게 설정되었는지 확인
- 네트워크 탭에서 리다이렉트 확인

---

## 참고 자료

- [토스페이먼츠 개발자 문서](https://docs.tosspayments.com/)
- [토스페이먼츠 테스트 모드 가이드](https://docs.tosspayments.com/guides/test-mode)

